/*!CK:1319486716!*//*1384873487,173224797*/

if (self.CavalryLogger) { CavalryLogger.start_js(["z652o"]); }

__d("DevsiteReferenceTable",["CSS","cx","DOMQuery","Event","Parent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('cx'),i=b('DOMQuery'),j=b('Event'),k=b('Parent');function l(m){"use strict";j.listen(m,'click',function(event){var n=k.byTag(event.getTarget(),'tr');if(!g.hasClass(n,"_5m27"))return;this.$DevsiteReferenceTable0(m,n,m.rows);}.bind(this));}l.prototype.$DevsiteReferenceTable0=function(m,n,o){"use strict";var p=this.$DevsiteReferenceTable1(n),q=g.hasClass(n,'open'),r=[].indexOf.call(o,n)+1;for(var s=r;s<o.length;s++){var t=o[s],u=this.$DevsiteReferenceTable1(t);if(!this.$DevsiteReferenceTable2(p,u))break;if(q){g.hide(t);}else if(this.$DevsiteReferenceTable3(p,u)){g.show(t);}else if(g.hasClass(this.$DevsiteReferenceTable4(m,u),'open'))g.show(t);}g.toggleClass(n,'open');};l.prototype.$DevsiteReferenceTable1=function(m){"use strict";return (/row_((\d+-?)+)/).exec(m.className)[1];};l.prototype.$DevsiteReferenceTable4=function(m,n){"use strict";var o=n.split('-');o.pop();return i.find(m,'tr.row_'+o.join('-'));};l.prototype.$DevsiteReferenceTable2=function(m,n){"use strict";return n.substring(0,m.length+1)===m+'-';};l.prototype.$DevsiteReferenceTable3=function(m,n){"use strict";var o=n.substr(m.length+1);return o.indexOf('-')<0;};e.exports=l;});
__d("PluginConfigurator",["CSS","DOM","Event","SelectorDeprecated","URI","$","arrayContains","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Event'),j=b('SelectorDeprecated'),k=b('URI'),l=b('$'),m=b('arrayContains'),n=b('copyProperties'),o=b('ge'),p=[];function q(){}n(q.prototype,{init:function(r,s){this.config=r;this.config.code_button=s;for(var t in this.config.params)this.config.params[t].value=this.config.params[t]['default'];var u=l(this.config.form_id),v=h.scry(u,'input[type="text"]'),w=h.scry(u,'input[type="checkbox"]'),x=v.concat(w,h.scry(u,'textarea'));for(var y in this.config.params){var z=0;if(this.config.params[y].type=='question'){var aa='param_'+y+'_link',ba=y+'_link',ca=o(aa);this.config.params[ba]={};this.config.params[ba].lastShownPollItem=1;this.config.params[ba].questionName=y;for(var da=0,ea=x.length;da<ea;da++)if(x[da].name==y+"poll"+z){z++;this.config.params[x[da].name]={};this.config.params[x[da].name].pollName=y;this.config.params[x[da].name].type='poll';this.config.params[x[da].name].value=this.config.params[y]['default'];}this.config.params[y].questionsCount=z-1;i.listen(ca,'click',this.handleAddLinkClick.bind(this));}}for(var da=0,ea=x.length;da<ea;da++){this.updateFormElement(x[da]);i.listen(x[da],'change',this.handleChange.bind(this));}for(da=0;da<p.length;da++){var fa=p[da];this.updateFormElement(fa);fa.subscribe('change',function(ga,event){this.updateFormElement(ga);if(this.getName(ga)!='pageselector')this.renderExample();}.bind(this,fa));}this.renderExample();},renderExample:function(){var r='',s={},t=false,u=[],v;for(var w in this.config.params){var x=this.config.params[w],y=x.value,z=x['default'],aa=x.example,ba=x.always_set,ca=x.type;if(y===undefined&&aa!==undefined)y=aa;if(x.xfbml_name)w=x.xfbml_name;if(ca=='question')v=w;if(ca=='poll')u.push(y);if(w=='colorscheme'&&y=='dark')t=true;if(y!==undefined&&y!==''&&y!==null&&ca!='question'&&ca!='poll'&&(ba!=null||y!=z||y==aa)){w='data-'+w.replace(/_/g,'-');s[w]=y;}}if(u.length!==0)s[v]=JSON.stringify(u);r=h.create('div');for(var da in s)if(s.hasOwnProperty(da))r.setAttribute(da,s[da]);r.className=this.config.xfbml.replace(':','-');if(!this.config.example_id)return;var ea=l(this.config.example_id),fa=["fb:activity","fb:comments","fb:facepile","fb:follow","fb:like","fb:like-box","fb:recommendations","fb:subscribe"];if(m(fa,this.config.xfbml))g.conditionClass(r,'dark_background',t);h.setContent(ea,r);a.FB.XFBML.parse(ea);},handleAddLinkClick:function(event){var r=event.getTarget(),s=this.getName(r)||this.getName(r.parentNode),t=this.config.params[s].lastShownPollItem,u=this.config.params[s].questionName;t++;var v=o('param_'+u+t);if(v!=null){v.type="text";this.config.params[s].lastShownPollItem=t;var w=o('param_'+u+(t+1));if(w==null){r.parentNode.style.visibility='hidden';r.style.visibility='hidden';}}},handleChange:function(event){var r=event.getTarget();this.updateFormElement(r);this.renderExample();},getName:function(r){return r.name||r.getName()||r.getAttribute('data-name');},updateFormElement:function(r){var s=this.getName(r),t=this.config.params[s];if(s!==null&&t){if(t.type=='bool'){t.value=r.checked?'true':'false';}else if(t.type=='enum'){t.value=r.getValue();}else if(t.type=='pageselector'){var u=j.getValue(r);if(!!r.getAttribute('data-multiple')){u=u.filter(function(y){return y.length>0;});u=u.join(',');}t.value=u;}else if(r.value!=r.placeholder)t.value=r.value;var v=t.value;if(t.type=='poll'){v=this.handlePollValueChange(s);s=t.pollName;}var w={};w[s]=v;var x=k(this.config.code_button.href);x.addQueryData(w);this.config.code_button.href=x.toString();}},handlePollValueChange:function(r){var s=this.config.params[r],t=s.pollName,u=[];for(var v=0;v<this.config.params[t].questionsCount;v++){var w=this.config.params[t+'poll'+v].value;if(w!=='')u.push(w);}return JSON.stringify(u);}});q.initSelect=function(r,s){var t=h.scry(r,'button');t.forEach(function(u){i.listen(u,'click',function(event){t.forEach(function(v){g.removeClass(v,'uiPillButtonSelected');});g.addClass(u,'uiPillButtonSelected');s.show(u.id.replace('button','snip'));});});};q.initAppChooser=function(r,s){r.subscribe('change',function(t){var u=r.getValue(),v=s[u];if(v){l('sandbox_warning_link').href='https://developers.facebook.com/apps/'+u+'/summary/';g.show(l('sandbox_warning'));}else g.hide(l('sandbox_warning'));['snip-html5','snip-xfbml','snip-iframe','snip-url'].forEach(function(w){var x=h.scry(l(w),'textarea');if(x.length>0)h.setContent(x[0],h.getText(x[0]).replace(/appId=\d+/,'appId='+u));var y=h.scry(l(w),'.uiSelector');if(y.length>0)j.setSelected(y[0],u);});});};q.registerSelector=function(r){p.push(r);};e.exports=q;});
__d("legacy:devsite-plugin-config",["PluginConfigurator"],function(a,b,c,d){a.PluginConfigurator=b('PluginConfigurator');},3);